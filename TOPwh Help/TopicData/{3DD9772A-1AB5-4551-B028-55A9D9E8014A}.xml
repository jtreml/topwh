<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Topic Name="Connecting nested polygons" Title="Connecting nested polygons" ContentsTitle="Connecting nested polygons" Status="In Progress" CreatedOn="05-12-2006 19:13:08" ModifiedOn="11-12-2006 18:41:22" LayoutName="" AllStyleSheets="True" AllScripts="True" AutoGenerateIndexEntry="True" IncludeInHelpFile="True" HelpContextIDs="" Category="{DAD411D6-5265-44F5-8AF0-C72E34EE5809}">
    <Notes/>
    <s k="BodyText"><![CDATA[<P>The algorithm for connecting / combining a polygon with a polygon inside has been one of the two big parts of this program, and is implemented as follows:</P>
<P>&nbsp;</P>
<P><STRONG>Algorithm</STRONG></P>
<P>Finding appropriate points to connect the two polygons:</P>
<OL>
<LI>Find the right most point of the inner polygon.</LI>
<LI>Find the left most point of the outer polygon which is still right of the right most point of the inner polygon.</LI>
<LI>Connect this two points to a segment.</LI>
<LI>Test each two consecutive vertices of the outer polygon for intersection with this segment.</LI>
<LI>If there is no intersection, these two points can be used to combine the two polygons. <EM>Go on with combining the two polygons.</EM></LI>
<LI>If there are intersections, select the two vertices whose intersection point is closest to the inner polygon's right most point and form a triangle between this point and the two vertices.</LI>
<LI>Test all vertices of the outer polygon whether they are inside this triangle and right of the left most point of the outer polygon which is still right of the inner polygon.</LI>
<LI>If there are no such points, the right most vertex of the two used to form the triangle with the inner polygon can be used to combine the two polygons. <EM>Go on with combining the two polygons.</EM></LI>
<LI>If there is a point inside the triangle, select the one closest to the inner polygon's right most point and use this point to combine the two polygons. <EM>Go on with combining the two polygons.</EM></LI></OL>
<P>Combining the two polygons:</P>
<P>Given the points of the outer polygon named o<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>1</SUB></SPAN>, o<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>2</SUB></SPAN>, ..., o<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>n</SUB></SPAN>, the two inner polygons right most point with index r, the outer polygon's point identified by the step above with index s and the inner polygon's vertices named i<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>1</SUB></SPAN>, i<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>2</SUB></SPAN>, ..., i<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>m</SUB></SPAN>, the combined polygon is as follows:</P>
<P><FONT size=2>P<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>combined</SUB></SPAN> = [o<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>1</SUB><FONT face=Verdana>, ..., o<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>s</SUB></SPAN></FONT></SPAN><SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><FONT face=Verdana>, i<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>r</SUB><FONT face=Verdana>, ..., i<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>m</SUB></SPAN>, i<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>1</SUB></SPAN>, ..., i<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>r</SUB></SPAN>, o<SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>s</SUB></SPAN>, ..., </FONT><SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><FONT face=Verdana>o</FONT><SPAN lang=ES style="FONT-SIZE: 11pt; LINE-HEIGHT: 115%; FONT-FAMILY: 'Calibri','sans-serif'; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: ES; mso-fareast-language: EN-US; mso-bidi-language: AR-SA"><SUB>n</SUB><FONT face=Verdana>]</FONT></SPAN></SPAN></SPAN></FONT></SPAN></FONT></P>
<P>&nbsp;</P>
<P><STRONG>Notes:</STRONG></P>
<P>Pay attention to the fact that the resulting polygon is no longer simple, as the vertices used to combine the polygons appear twice in the new polygon. This is especially important for the triangulation algorithm which is to be used afterwards to triangulate the so cerated polygon with holes.</P>
<P>If you want to combine a polygon with all it's contained polygons, order the contained polygons from right to left, the combine the outer polygon with the first one in the list. Afterwards combine the resulting polygon with the next one in the list, again the resulting polygon with the one following the next one in the list and so on.</P>]]></s>
</Topic>
